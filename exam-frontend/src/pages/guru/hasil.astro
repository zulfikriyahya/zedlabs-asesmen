---
// src/pages/guru/hasil.astro
import DashboardLayout from '@/layouts/Dashboard.astro';
import Table from '@/components/ui/Table.astro';

// Mock Data (Replace with API fetch in real app)
const results = [
  { id: 1, student: 'Adi Pratama', exam: 'Matematika Dasar', score: 85, submitted_at: '2024-01-20 09:30', status: 'Lulus' },
  { id: 2, student: 'Budi Santoso', exam: 'Matematika Dasar', score: 60, submitted_at: '2024-01-20 09:45', status: 'Remedial' },
  { id: 3, student: 'Citra Dewi', exam: 'Biologi XI', score: 92, submitted_at: '2024-01-21 10:15', status: 'Lulus' },
];
---

<DashboardLayout title="Hasil Ujian" role="guru">
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      
      <!-- Filters -->
      <div class="flex flex-col md:flex-row gap-4 mb-6">
        <div class="form-control w-full md:w-auto">
          <label class="label"><span class="label-text">Pilih Ujian</span></label>
          <select class="select select-bordered w-full md:w-64">
            <option>Semua Ujian</option>
            <option>Matematika Dasar</option>
            <option>Biologi XI</option>
          </select>
        </div>

        <div class="form-control w-full md:w-auto">
          <label class="label"><span class="label-text">Kelas</span></label>
          <select class="select select-bordered w-full md:w-48">
            <option>Semua Kelas</option>
            <option>X-IPA 1</option>
            <option>XI-IPA 2</option>
          </select>
        </div>

        <div class="form-control w-full md:w-auto md:ml-auto">
          <label class="label"><span class="label-text">&nbsp;</span></label>
          <button class="btn btn-success text-white gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
            Export Excel
          </button>
        </div>
      </div>

      <!-- Results Table -->
      <Table zebra>
        <thead>
          <tr>
            <th>Nama Siswa</th>
            <th>Mata Pelajaran</th>
            <th>Waktu Submit</th>
            <th>Nilai</th>
            <th>Status</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          {results.map((row) => (
            <tr>
              <td class="font-bold">{row.student}</td>
              <td>{row.exam}</td>
              <td>{row.submitted_at}</td>
              <td>
                <span class={`font-bold text-lg ${row.score < 75 ? 'text-error' : 'text-success'}`}>
                  {row.score}
                </span>
              </td>
              <td>
                <span class={`badge ${row.score < 75 ? 'badge-error' : 'badge-success'} text-white`}>
                  {row.status}
                </span>
              </td>
              <td>
                <button class="btn btn-xs btn-ghost">Detail</button>
              </td>
            </tr>
          ))}
        </tbody>
      </Table>

      <!-- Pagination -->
      <div class="flex justify-center mt-6">
        <div class="join">
          <button class="join-item btn">«</button>
          <button class="join-item btn btn-active">1</button>
          <button class="join-item btn">2</button>
          <button class="join-item btn">3</button>
          <button class="join-item btn">»</button>
        </div>
      </div>

    </div>
  </div>
</DashboardLayout>