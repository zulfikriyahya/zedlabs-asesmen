---
import DashboardLayout from '@/layouts/Dashboard.astro';

// Mock Data
const activeSessions = [
  { id: 1, name: 'Sesi 1 - Pagi', room: 'Lab A', time: '07:30 - 09:30', login_count: 32, total: 36 },
  { id: 2, name: 'Sesi 1 - Pagi', room: 'Lab B', time: '07:30 - 09:30', login_count: 35, total: 35 },
];
---

<DashboardLayout title="Dashboard Operator" role="operator">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <!-- Stats Cards -->
    <div class="stat bg-base-100 shadow rounded-box">
      <div class="stat-figure text-primary">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
      </div>
      <div class="stat-title">Total Peserta</div>
      <div class="stat-value">1,204</div>
      <div class="stat-desc">Terdaftar di sistem</div>
    </div>
    
    <div class="stat bg-base-100 shadow rounded-box">
      <div class="stat-figure text-secondary">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
      </div>
      <div class="stat-title">Klien Online</div>
      <div class="stat-value text-secondary">67</div>
      <div class="stat-desc">Sedang aktif</div>
    </div>

    <div class="stat bg-base-100 shadow rounded-box">
      <div class="stat-figure text-accent">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
      </div>
      <div class="stat-title">Status Server</div>
      <div class="stat-value text-accent text-lg">Normal</div>
      <div class="stat-desc">CPU: 12% | RAM: 40%</div>
    </div>
  </div>

  <!-- Active Sessions -->
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <div class="flex justify-between items-center mb-4">
        <h2 class="card-title">Sesi Ujian Berlangsung</h2>
        <div class="flex gap-2">
          <button class="btn btn-sm btn-outline btn-error">Force Logout All</button>
          <button class="btn btn-sm btn-primary">Refresh</button>
        </div>
      </div>

      <div class="overflow-x-auto">
        <table class="table table-zebra w-full">
          <thead>
            <tr>
              <th>Nama Sesi</th>
              <th>Ruang</th>
              <th>Waktu</th>
              <th>Kehadiran</th>
              <th>Status</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            {activeSessions.map(session => (
              <tr>
                <td class="font-bold">{session.name}</td>
                <td>{session.room}</td>
                <td>{session.time}</td>
                <td>
                  <div class="flex items-center gap-2">
                    <progress class="progress progress-success w-24" value={session.login_count} max={session.total}></progress>
                    <span class="text-xs">{session.login_count}/{session.total}</span>
                  </div>
                </td>
                <td><span class="badge badge-success animate-pulse">Aktif</span></td>
                <td>
                  <a href={`/operator/sesi/${session.id}`} class="btn btn-xs btn-ghost">Detail</a>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
    <a href="/operator/peserta/import" class="btn h-20 flex-col gap-1 bg-base-100 shadow hover:bg-base-200 border-none">
      <span class="text-2xl">üì•</span>
      <span class="text-xs">Import Peserta</span>
    </a>
    <a href="/operator/cetak-kartu" class="btn h-20 flex-col gap-1 bg-base-100 shadow hover:bg-base-200 border-none">
      <span class="text-2xl">üñ®Ô∏è</span>
      <span class="text-xs">Cetak Kartu</span>
    </a>
    <a href="/operator/reset-login" class="btn h-20 flex-col gap-1 bg-base-100 shadow hover:bg-base-200 border-none">
      <span class="text-2xl">üîÑ</span>
      <span class="text-xs">Reset Login</span>
    </a>
    <a href="/operator/laporan" class="btn h-20 flex-col gap-1 bg-base-100 shadow hover:bg-base-200 border-none">
      <span class="text-2xl">üìä</span>
      <span class="text-xs">Berita Acara</span>
    </a>
  </div>
</DashboardLayout>